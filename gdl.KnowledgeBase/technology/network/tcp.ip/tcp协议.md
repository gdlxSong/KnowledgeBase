### TCP协议

![1571547718924](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1571547718924.png)



###### 端口号

​	占16位，标识进程或服务。

###### 序号

​	占32bit，seq，在tcp传输的字节流中，每一个字节都是按顺序编号的，表示本报文中的数据的第一个字段。

###### 确认号

​	和序号同是字节序号，表示期待下一个报文接受的序号。

###### 数据偏移

​	就是数据距离数据报首部的距离，其实就是tcp头部的长度，单位为4B，最大60bytes。

###### 属性标识

​	#URG：表明此报文中存在紧急数据，是高优先级的数据，应该尽快传送，不应再缓存队列中排队。配合紧急指针使用。

​	#ACK：确认序号标识，确认收到数据序号。并发送下一次期望序号。

​	#PSH：接收方应该尽快将数据交付应用程序，而不是在缓存中排队。

​	#RST：表示tcp连接出现致命错误，必须释放连接，重新建立连接。

​	#STYN：同步标识，用去请求连接。

​	#FIN：表明发送方已经发送完，要求释放连接。

###### 窗口

​	占16bit，指的是发送本报文的一方允许对方发送的数据量。窗口的单位是byte。其实就是作为接收方的缓冲区剩余大小。

###### 校验和

​	使用CRC编码进行传输异常检测，占16bit，无论是tcp还是udp都是需要一个12Byte的伪首部作为辅助进行校验和计算的，伪首部（32bit源地址，32bit目的地址，8bit保留(0)，8bit协议号，16bit的报文长度(数据+头部)）。

###### 紧急指针

​	指出报文中紧急数据的字节数(从数据第一个字节开始)，结合URG使用才有意义。





----------



